!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},o=function(e,o){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.querySelector(`#${o.id}-error`).textContent="",o.classList.remove(n.inputErrorClass)},n=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?r(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},r=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)};var c=e+"d3610e9c6dce3cb370d8.svg",a=e+"2fc47fd8e9a9bcd9612f.jpg",l=e+"d38272e02bb4f1ab1c37.svg",s=e+"40608da7369d39bc1077.svg",i=e+"dba18798529f242c4c6d.svg";document.getElementById("spot-logo").src=c,document.getElementById("profile-avatar").src=a,document.getElementById("pencil-icon").src=l,document.getElementById("plus-icon").src=s,document.getElementById("close-icon").src=i,document.getElementById("modal-close-icon").src=i;const d=document.querySelector(".profile__name"),u=document.querySelector(".profile__edit-btn"),m=document.querySelector(".profile__description"),p=document.querySelector(".profile__add-btn"),f=document.querySelector("#edit-profile-modal"),y=f.querySelector(".modal__close-btn"),_=f.querySelector("#profile-name-input"),v=f.querySelector("#profile-description-input"),g=f.querySelector(".modal__form"),b=document.querySelector("#add-card-modal"),S=b.querySelector(".modal__close-btn"),q=b.querySelector(".modal__submit-btn"),h=b.querySelector(".modal__form"),E=b.querySelector("#add-card-name-input"),k=b.querySelector("#add-card-link-input"),w=document.querySelector("#preview-modal"),L=w.querySelector(".modal__image"),x=w.querySelector(".modal__caption"),C=w.querySelector(".modal__close-btn"),B=document.querySelector("#card-template"),z=document.querySelector(".cards__list");function j(e){const t=B.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),c=t.querySelector(".card__delete-button");return o.textContent=e.name,n.setAttribute("src",e.link),n.setAttribute("alt",e.name),r.addEventListener("click",(()=>{r.classList.toggle("card__like-button-liked")})),c.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{I(w),L.src=e.link,L.alt=e.name,x.textContent=e.name})),t}function A(e){"Escape"===e.key&&D(document.querySelector(".modal_opened"))}function I(e){e.classList.add("modal_opened"),document.addEventListener("keydown",A)}function D(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",A)}var G;C.addEventListener("click",(()=>{D(w)})),u.addEventListener("click",(()=>{var e;_.value=d.textContent,v.value=m.textContent,e=g,[_,v].forEach((t=>{o(e,t,undefined)})),I(f)})),y.addEventListener("click",(()=>{D(f)})),p.addEventListener("click",(()=>{I(b)})),S.addEventListener("click",(()=>{D(b)})),g.addEventListener("submit",(function(e){e.preventDefault(),d.textContent=_.value,m.textContent=v.value,D(f)})),h.addEventListener("submit",(function(e){e.preventDefault();const o=j({name:E.value,link:k.value});z.prepend(o),e.target.reset(),disableButton(q,t),D(b)})),[{name:"Golden Gate bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=j(e);z.append(t)})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&D(e)}))})),G=t,document.querySelectorAll(G.formSelector).forEach((e=>{((e,t)=>{const r=Array.from(e.querySelectorAll(t.inputSelector)),c=e.querySelector(t.submitButtonSelector);n(r,c,t),r.forEach((a=>{a.addEventListener("input",(function(){((e,t,n)=>{t.validity.valid?o(e,t,n):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,n)})(e,a,t),n(r,c,t)}))}))})(e,G)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVVZLElBQUluQixFQUFPTCxnQkFBZ0IsRUFXM0M0RixDQUFlekYsRUFBUUMsRUFBU0EsRUFBUTBGLGtCQUFtQnpGLEVBRzdELEVBNkNJc0YsQ0FBbUJ4RixFQUFRQyxFQUFTQyxHQUNwQ1MsRUFBa0JDLEVBQVdDLEVBQVVYLEVBQ3pDLEdBQUUsR0FDRixFQU1BbUYsQ0FBa0JyRixFQUFRRSxFQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnID0gc2V0dGluZ3MpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWwsIGNvbmZpZyk7XG4gICAgLy9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgLy9BZGQgYSBtb2RpZmllciBjbGFzcyB0byB0aGUgYnV0dG9uRWwgdG8gbWFrZSBpdCBncmV5XG4gICAgLy9Eb24ndCBmb3JnZXQgdGhlIENTU1xuICAgIC8vYnV0dG9uRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19zdWJtaXQtYnRuX2Rpc2FibGVkXCIpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuLy9vcHRpb25hbFxuZXhwb3J0IGNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuLy90b2RvIC0gdXNlIHRoZSBzZXR0aW5ncyBvYmplY3QgaW4gYWxsIGZ1bmN0aW9ucyBpbnN0ZWFkIG9mIGhhcmQgY29kZWQgc3RyaW5nc1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcblxuICAvLyBUT0RPIC0gaGFuZGxlIGluaXRpYWwgc3RhdGVcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG4vLyB3aWxsIGNhbGwgaW4gaW5kZXguanNcbi8vIGVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIHJlc2V0VmFsaWRhdGlvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5pbXBvcnQgbG9nb1NyYyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28uc3ZnXCI7XG5jb25zdCBsb2dvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcG90LWxvZ29cIik7XG5sb2dvLnNyYyA9IGxvZ29TcmM7XG5cbmltcG9ydCBhdmF0YXJTcmMgZnJvbSBcIi4uL2ltYWdlcy9hdmF0YXIuanBnXCI7XG5jb25zdCBhdmF0YXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2ZpbGUtYXZhdGFyXCIpO1xuYXZhdGFyLnNyYyA9IGF2YXRhclNyYztcblxuaW1wb3J0IHBlbmNpbFNyYyBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcbmNvbnN0IHBlbmNpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVuY2lsLWljb25cIik7XG5wZW5jaWwuc3JjID0gcGVuY2lsU3JjO1xuXG5pbXBvcnQgcGx1c1NyYyBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMuc3ZnXCI7XG5jb25zdCBwbHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbHVzLWljb25cIik7XG5wbHVzLnNyYyA9IHBsdXNTcmM7XG5cbmltcG9ydCBjbG9zZVNyYyBmcm9tIFwiLi4vaW1hZ2VzL2Nsb3NlYnRuLnN2Z1wiO1xuY29uc3QgY2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlLWljb25cIik7XG5jbG9zZS5zcmMgPSBjbG9zZVNyYztcblxuaW1wb3J0IG1vZGFsY2xvc2VTcmMgZnJvbSBcIi4uL2ltYWdlcy9jbG9zZWJ0bi5zdmdcIjtcbmNvbnN0IG1vZGFsY2xvc2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNsb3NlLWljb25cIik7XG5tb2RhbGNsb3NlLnNyYyA9IG1vZGFsY2xvc2VTcmM7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgYnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiUmVzdGF1cmFudCB0ZXJyYWNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzItcGhvdG8tYnktY2VpbGluZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQW4gb3V0ZG9vciBjYWZlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzMtcGhvdG8tYnktdHViYW51ci1kb2dhbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzUtcGhvdG8tYnktdmFuLWFuaC1uZ3V5ZW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzYtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXTtcblxuLy9Qcm9maWxlIHJlbGF0ZWRcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcblxuLy9Gb3JtIHJlbGF0ZWRcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xuY29uc3QgZWRpdE1vZGFsQ2xvc2VCdG4gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuLy9hZHZpc2VkIHRvIGNoYW5nZSBpZCBuYW1lIGZyb20gc29tZXRoaW5nIGdlbmVyaWMgc3VjaCBhcyBcIm5hbWVcIlxuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnRuID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGNhcmRGb3JtID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBjYXJkTmFtZUlucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbmFtZS1pbnB1dFwiKTtcbmNvbnN0IGNhcmRMaW5rSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1saW5rLWlucHV0XCIpO1xuXG4vL1ByZXZpZXcgcmVsYXRlZFxuY29uc3QgcHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgcHJldmlld01vZGFsSW1hZ2VFbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld0Nsb3NlQnRuID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcblxuLy9DYXJkIHJlbGF0ZWQgZWxlbWVudHNcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbi8vdXNpbmcgZGF0YSBhcyBhIHBsYWNlaG9sZGVyIGJ1dCB0aGV5IGFyZSBvYmplY3RzLCBwcmVjaXNlbHkgdGhlIG9uZXMgYWJvdmUgdG8gY2xvbmUgY2FyZHNcbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmROYW1lRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcblxuICBjYXJkTmFtZUVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgZGF0YS5saW5rKTtcbiAgY2FyZEltYWdlRWwuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGRhdGEubmFtZSk7XG4gIC8vIENhbiBhbHNvIGJlIHdyaXR0ZW4gYXM6XG4gIC8vIGNhcmRJbWFnZUVsLnNyYyA9IGRhdGEubGlua1xuICAvLyBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLmFsdFxuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uLWxpa2VkXCIpO1xuICB9KTtcblxuICBjYXJkRGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbnByZXZpZXdDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgY2xvc2VNb2RhbChvcGVuZWRNb2RhbCk7XG4gIH1cbn1cblxuLy90byBjYWxsIGFuIGVsZW1lbnQgd2l0aCBhbiBpZCB5b3UgY2FuIHVzZSBhICNcbi8vaWYgbnVsbCBpcyByZXR1cm5lZCBpbiBjb25zb2xlLCBET1VCTEUgQ0hFQ0sgc3BlbGxpbmcgYXMgaW5zdHJ1Y3RlZCBpbiB2aWRlb1xuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY0tleSk7XG59XG5cbi8vcmVtb3ZlIHRoZSBFdmVudExpc3RlbmVyIG9wZW5Nb2RhbCByYXRoZXIgdGhhbiBhcHBseWluZyBtb2RhbF9fY2xvc2VkXG4vL25vIC4gd2hlbiB1c2luZyBjbGFzc0xpc3RcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjS2V5KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7IG5hbWU6IGNhcmROYW1lSW5wdXQudmFsdWUsIGxpbms6IGNhcmRMaW5rSW5wdXQudmFsdWUgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpbnB1dFZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xufVxuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0TW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKGVkaXRGb3JtRWxlbWVudCwgW1xuICAgIGVkaXRNb2RhbE5hbWVJbnB1dCxcbiAgICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LFxuICBdKTtcbiAgb3Blbk1vZGFsKGVkaXRNb2RhbCk7XG59KTtcblxuZWRpdE1vZGFsQ2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufSk7XG5cbmNhcmRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5jYXJkTW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XG59KTtcblxuZWRpdEZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdEZvcm1TdWJtaXQpO1xuXG5jYXJkRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xuXG4vL2NhcmRNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+e1xuLy8gIGhhbmRsZUVkaXRDYXJkU3VibWl0KGNhcmRNb2RhbCk7XG4vL30pXG5cbi8vZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsQ2FyZHMubGVuZ3RoOyBpKyspIHtcbi8vICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGluaXRpYWxDYXJkc1tpXSk7XG4vLyAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuLy99XG4vLyBrZWVwaW5nIGZvciBub3cgYXMgZXhhbXBsZSBmb3IgY29kZSBiZWxvd1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5jb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuXG5hbGxNb2RhbHMuZm9yRWFjaCgoY3VycmVudE1vZGFsKSA9PiB7XG4gIGN1cnJlbnRNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSBjdXJyZW50TW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwoY3VycmVudE1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJsb2dvU3JjIiwiYXZhdGFyU3JjIiwicGVuY2lsU3JjIiwicGx1c1NyYyIsImNsb3NlU3JjIiwibW9kYWxjbG9zZVNyYyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRGVzY3JpcHRpb24iLCJjYXJkTW9kYWxCdXR0b24iLCJlZGl0TW9kYWwiLCJlZGl0TW9kYWxDbG9zZUJ0biIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQiLCJlZGl0Rm9ybUVsZW1lbnQiLCJjYXJkTW9kYWwiLCJjYXJkTW9kYWxDbG9zZUJ0biIsImNhcmRTdWJtaXRCdG4iLCJjYXJkRm9ybSIsImNhcmROYW1lSW5wdXQiLCJjYXJkTGlua0lucHV0IiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsInByZXZpZXdDbG9zZUJ0biIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsIm5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJsaW5rIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZSIsIm9wZW5Nb2RhbCIsImFsdCIsImhhbmRsZUVzY0tleSIsImV2dCIsImtleSIsImNsb3NlTW9kYWwiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsImZvckVhY2giLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJ0YXJnZXQiLCJyZXNldCIsIml0ZW0iLCJhcHBlbmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY3VycmVudE1vZGFsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9